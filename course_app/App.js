// @flow

import React from 'react'
import {
  Text,
  View,
  TouchableOpacity
} from 'react-native'
import Base64 from 'base64-js'
import Sodium from 'react-native-sodium'
import base64 from 'react-native-base64'

const App = () => {  

  const _OnClick_btnEncrypt = () => {
    const alicepk = Base64.fromByteArray(new Uint8Array([
      0x85, 0x20, 0xf0, 0x09, 0x89, 0x30, 0xa7, 0x54, 0x74, 0x8b, 0x7d, 0xdc, 0xb4, 0x3e, 0xf7, 0x5a,
      0x0d, 0xbf, 0x3a, 0x0d, 0x26, 0x38, 0x1a, 0xf4, 0xeb, 0xa4, 0xa9, 0x8e, 0xaa, 0x9b, 0x4e, 0x6a]))

    const alicesk = Base64.fromByteArray(new Uint8Array([
      0x77, 0x07, 0x6d, 0x0a, 0x73, 0x18, 0xa5, 0x7d, 0x3c, 0x16, 0xc1, 0x72, 0x51, 0xb2, 0x66, 0x45,
      0xdf, 0x4c, 0x2f, 0x87, 0xeb, 0xc0, 0x99, 0x2a, 0xb1, 0x77, 0xfb, 0xa5, 0x1d, 0xb9, 0x2c, 0x2a]))

    const bobsk = Base64.fromByteArray(new Uint8Array([
      0x5d, 0xab, 0x08, 0x7e, 0x62, 0x4a, 0x8a, 0x4b, 0x79, 0xe1, 0x7f, 0x8b, 0x83, 0x80, 0x0e, 0xe6,
      0x6f, 0x3b, 0xb1, 0x29, 0x26, 0x18, 0xb6, 0xfd, 0x1c, 0x2f, 0x8b, 0x27, 0xff, 0x88, 0xe0, 0xeb]))

    const nonce = Base64.fromByteArray(new Uint8Array([
      0x69, 0x69, 0x6e, 0xe9, 0x55, 0xb6, 0x2b, 0x73, 0xcd, 0x62, 0xbd, 0xa8,
      0x75, 0xfc, 0x73, 0xd6, 0x82, 0x19, 0xe0, 0x03, 0x6b, 0x7a, 0x0b, 0x37]))

    const bobPublicKey = '/AllqhynaA/pvvdMhoILo2YNxQ1MnxtQlOKTR1jZV0I='
    const str = base64.encode('Hello World')
    Sodium.crypto_box_easy(str, nonce, bobPublicKey, alicesk).then((cc) => {
      alert("Encrypted cipher : " + cc)
      // Sodium.crypto_box_open_easy(cc, nonce, alicepk, bobsk).then((mm) => {
      //   alert("Descrypted Text : "+ base64.decode(mm))     
      // })
    })
  }

  return (
    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
      <TouchableOpacity onPress={_OnClick_btnEncrypt}>
        <Text style={{ fontWeight: '600', fontSize: 18 }}>
          Click here to get encrypted Hello World
         </Text>         
      </TouchableOpacity>
    </View>
  )
}

export default App